/* Import Design Tokens */
@import './styles/tokens.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   BASE STYLES - German Functionalism + Scandinavian Minimalism
   ============================================================================ */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body,
#root {
  width: 100%;
  height: 100%;
}

body {
  font-family: var(--font-primary);
  font-size: var(--text-body-size);
  line-height: var(--text-body-line-height);
  font-weight: var(--text-body-weight);
  color: var(--color-black);
  background-color: var(--surface-0);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Typography Base Styles */
h1, h2, h3, h4, h5, h6 {
  color: var(--color-black);
  font-weight: 700;
  margin: 0;
}

h1 {
  font-size: var(--text-h1-size);
  line-height: var(--text-h1-line-height);
}

h2 {
  font-size: var(--text-h2-size);
  line-height: var(--text-h2-line-height);
}

h3 {
  font-size: var(--text-h3-size);
  line-height: var(--text-h3-line-height);
}

p {
  margin: 0;
}

/* Remove default button styles */
button {
  font-family: inherit;
  border: none;
  background: none;
  cursor: pointer;
}

/* Remove default input styles */
input, select, textarea {
  font-family: inherit;
  border: none;
  outline: none;
}

/* Links */
a {
  color: var(--color-primary);
  text-decoration: none;
}

a:hover {
  color: var(--color-primary-dark);
}

/* Screen reader only - visually hidden but accessible to assistive technology */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-in {
  animation: slideIn 0.3s ease-out;
}

/* ============================================================================
   MERMAID FLOWCHART STYLING
   Design Philosophy: German Functionalism + Scandinavian Minimalism

   Principles (Dieter Rams):
   1. Good design is innovative
   2. Good design makes a product useful
   3. Good design is aesthetic
   4. Good design is unobtrusive
   5. Good design is honest
   6. Good design is long-lasting
   7. Good design is thorough down to the last detail
   8. Good design is environmentally friendly
   9. Good design is as little design as possible
   10. Good design is understandable

   Color Strategy:
   - Bold, saturated colors for clarity (Scandinavian)
   - High contrast for accessibility
   - Minimal palette for focus
   - Color serves function, not decoration
   ============================================================================ */

/* Base flowchart styling - clean, minimal */
.flowchart {
  /* Crisp rendering for precision */
  shape-rendering: geometricPrecision;
}

/* Typography - Clear, functional, readable */
.flowchart .node text,
.flowchart .edgeLabel text {
  fill: var(--color-black) !important;
  font-weight: 500 !important;
  letter-spacing: 0.01em !important;
}

/* Edge styling - Minimal, functional */
.flowchart .edgePath .path,
.flowchart .flowchart-link {
  stroke: var(--color-gray-700) !important;
  stroke-width: 1.5px !important;
}

/* Edge labels - Clean background */
.flowchart .edgeLabel {
  background-color: var(--color-white) !important;
}

/* ============================================================================
   NODE STYLING - Functional Color Coding
   ============================================================================ */

/* Decision nodes (diamonds) - Chartreuse (High-energy)
   Principle: Decisions require attention - use high-energy accent color */
.flowchart polygon {
  fill: var(--color-accent-light) !important;
  stroke: var(--color-accent-dark) !important;
  stroke-width: 1.5px !important;
}

/* Start/Success nodes - Aquamarine (Fresh, positive)
   Principle: Positive outcomes use fresh, confident aquamarine */
.flowchart g[id*="Start"] rect,
.flowchart g[id*="start"] rect,
.flowchart g[id*="Success"] rect,
.flowchart g[id*="success"] rect,
.flowchart g[id*="Complete"] rect,
.flowchart g[id*="complete"] rect,
.flowchart g[id*="Start"] path,
.flowchart g[id*="start"] path,
.flowchart g[id*="Success"] path,
.flowchart g[id*="success"] path,
.flowchart g[id*="Complete"] path,
.flowchart g[id*="complete"] path {
  fill: var(--color-white) !important;
  stroke: var(--color-success) !important;
  stroke-width: 2.5px !important;
}

/* End/Error nodes - Red-Orange (Clear negative)
   Principle: Negative outcomes use clear, unambiguous red-orange */
.flowchart g[id*="End"] rect,
.flowchart g[id*="end"] rect,
.flowchart g[id*="Ended"] rect,
.flowchart g[id*="Denied"] rect,
.flowchart g[id*="Eligible"] rect,
.flowchart g[id*="Return"] rect,
.flowchart g[id*="End"] path,
.flowchart g[id*="end"] path,
.flowchart g[id*="Ended"] path,
.flowchart g[id*="Denied"] path,
.flowchart g[id*="Eligible"] path,
.flowchart g[id*="Return"] path {
  fill: var(--color-white) !important;
  stroke: var(--color-danger) !important;
  stroke-width: 2.5px !important;
}

/* Warning/Alternative nodes - Orange Peel (Vibrant attention)
   Principle: Caution states use vibrant orange */
.flowchart g[id*="Different"] rect,
.flowchart g[id*="Alternative"] rect,
.flowchart g[id*="Different"] path,
.flowchart g[id*="Alternative"] path {
  fill: var(--color-white) !important;
  stroke: var(--color-warning) !important;
  stroke-width: 2.5px !important;
}

/* Important nodes (permits, visas, cards) - Electric Indigo (Bold, modern)
   Principle: Key milestones use bold electric indigo */
.flowchart g[id*="Visa"] rect,
.flowchart g[id*="visa"] rect,
.flowchart g[id*="Permit"] rect,
.flowchart g[id*="permit"] rect,
.flowchart g[id*="Card"] rect,
.flowchart g[id*="card"] rect,
.flowchart g[id*="Blue"] rect,
.flowchart g[id*="PR"] rect,
.flowchart g[id*="Visa"] path,
.flowchart g[id*="visa"] path,
.flowchart g[id*="Permit"] path,
.flowchart g[id*="permit"] path,
.flowchart g[id*="Card"] path,
.flowchart g[id*="card"] path,
.flowchart g[id*="Blue"] path,
.flowchart g[id*="PR"] path {
  fill: var(--color-white) !important;
  stroke: var(--color-primary) !important;
  stroke-width: 2.5px !important;
}

/* Regular nodes - Neutral gray
   Principle: Standard steps recede, allowing important nodes to stand out */
.flowchart .node rect,
.flowchart .node path {
  fill: var(--color-white) !important;
  stroke: var(--color-gray-500) !important;
  stroke-width: 1.5px !important;
}

/* ============================================================================
   INTERACTION STATES - Functional, Not Decorative
   ============================================================================ */

/* Hover state - Functional feedback through stroke weight
   Principle: No decorative effects, only functional indicators
   Only applies to interactive nodes (those with matching steps) */
.flowchart .node-interactive:hover rect,
.flowchart .node-interactive:hover path,
.flowchart .node-interactive:hover polygon {
  cursor: pointer;
  stroke-width: 3px !important;
  /* No opacity changes - maintains clarity */
}

/* Selected state - Clear, bold indication
   Principle: Selection should be obvious and unambiguous
   Note: Component uses 'node-selected' class
   Uses black stroke to differentiate from purple milestone nodes (cards, visas, permits)
   Higher specificity to override important milestone node styling */
.flowchart g.node-selected rect,
.flowchart g.node-selected polygon,
.flowchart g.node-selected path,
.flowchart g.node.selected rect,
.flowchart g.node.selected polygon,
.flowchart g.node.selected path,
.flowchart g[class*="node-selected"] rect,
.flowchart g[class*="node-selected"] polygon,
.flowchart g[class*="node-selected"] path {
  stroke-width: 4px !important;
  /* No shadows - clean and functional */
}

/* ============================================================================
   NON-INTERACTIVE NODES - Subtle, Recessive Styling
   ============================================================================ */

/* Non-interactive nodes (Start, End, Decision without steps)
   Principle: These are visual markers, not actionable items
   Style: Small pill shape, grey background, no border, no hover effects */
.flowchart .node-non-interactive rect,
.flowchart .node-non-interactive path {
  fill: var(--color-gray-100) !important;
  stroke: none !important;
  stroke-width: 0 !important;
}

/* Non-interactive decision nodes (diamonds) */
/* .flowchart .node-non-interactive polygon {
  fill: var(--color-gray-100) !important;
  stroke: var(--color-gray-300) !important;
  stroke-width: 0 !important;
} */

/* Non-interactive node text - lighter, smaller */
.flowchart .node-non-interactive text {
  fill: var(--color-gray-500) !important;
  font-size: 12px !important;
  font-weight: 400 !important;
}

/* Ensure no cursor change on non-interactive nodes */
.flowchart .node-non-interactive {
  cursor: default !important;
}

/* Prevent hover effects on non-interactive nodes */
.flowchart .node-non-interactive:hover rect,
.flowchart .node-non-interactive:hover path,
.flowchart .node-non-interactive:hover polygon {
  cursor: default !important;
}
